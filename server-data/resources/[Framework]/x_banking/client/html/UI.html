<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<link href="style.css" rel="stylesheet" type="text/css" />
	<style>
		#depositUI,
		#withdrawUI,
		#general,
		#transferUI {
			display: none;
		}
	</style>
</head>

<body>
	<div class="container">
		<!-- ########### GENERAL ###########  -->
		<div class="cont-content" id="general">
			<div class="flex">
				<div class="balance">
					<p>Bem vindo ao West Bank<br>
						<span class="name"><span class="username1"></span></span><br>
						Seu saldo bancário:<br>
						<span class="money"><span class="euro">$</span><span class="curbalance"></span></span>
					</p>
				</div>
				<div class="list-btn">
					<button class="btn btn-blue" id="deposit">
						<p>Depositar<br>
					</button>
					<button class="btn btn-violet" id="withdraw">
						<p>Sacar<br>
					</button>
					<button class="btn btn-violet" id="transfer">
						<p>Tranferir<br>
					</button>
					<button class="btn btn-out">FECHAR</button>
				</div>
			</div>
		</div>
		<!-- ########### DEPOSIT ###########  -->
		<div class="cont-content2" id="depositUI">
			</br>
			</br>
			<form id="deposit1">
				<div class="input-cont">
					<label>Valor de depósito</label>
					<input id="amount" type="number" placeholder="$0">
				</div>
				<button class="btn btn-check" type="submit">
					<p>Aceitar<br>
				</button>
				<br>
				<button class="btn btn-back back">
					<p>Voltar</p>
				</button>
			</form>
			</br>
			</br>
		</div>
		<!-- ########### WITHDRAW ###########  -->
		<div class="cont-content2" id="withdrawUI">
			</br>
			</br>
			<form id="withdraw1">
				<div class="input-cont box-shadow">
					<label>Valor do saque</label>
					<input id="amountw" type="number" placeholder="$0">
				</div>
				<button class="btn btn-check" type="submit">
					<p>Aceitar</p>
				</button>
				<br>
				<button class="btn btn-back back">
					<p>Voltar</p>
				</button>
			</form>
			<br>
			</br>
		</div>

		<!-- ########### Transfer ###########  -->
		<div class="cont-content2" id="transferUI">
			</br>
			</br>
			<form id="transfer1">
				<div class="input-cont2">
					<label>Valor do depósito</label>
					<input id="amountw2" type="number" placeholder="$0">
					<input id="identidade" type="text" placeholder="identidade">
				</div>
				<button class="btn btn-check" type="submit">
					<p>Aceitar</p>
				</button>
				<br>
				<button class="btn btn-back back">
					<p>Voltar</p>
				</button>
			</form>
			<br>
			</br>
		</div>
	</div>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="nui://game/ui/jquery.js" type="text/javascript"></script>
	<script type="text/javascript">
		$(() => {
			window.addEventListener('message', (event) => {
				if (event.data.type === "balanceHUD") {
					$('.username1').html(event.data.player);
					$('.curbalance').html(event.data.balance);
					setTimeout(() => {
						$('#general').css('display', 'block')
					}, 100);
				} else if (event.data.type === "closeAll") {
					$('#waiting, #general, #transferUI, #withdrawUI, #depositUI, #topbar').hide();
					$('body').removeClass("active");
				} else if (event.data.type === "updateBalance"){
					$(".curbalance").html(event.data.updateMoney);
				}
			});
		});
		$('.btn-out').click(() => {
			$('#general, #waiting, #transferUI, #withdrawUI, #depositUI, #topbar').hide();
			$('body').removeClass("active");
			$.post('http://x_banking/NUIFocusOff', JSON.stringify({}));
		})
		$('.back').click(() => {
			$('#depositUI, #withdrawUI, transferUI').hide();
			$('#general').show();
		})
		$('#deposit').click(() => {
			$('#general').hide();
			$('#depositUI').show();
		})
		$('#withdraw').click(() => {
			$('#general').hide();
			$('#withdrawUI').show();
		})
		$('#transfer').click(() => {
			$('#general').hide();
			$('#transferUI').show();
		})
		$("#deposit1").submit((e) => {
			e.preventDefault(); // Prevent form from submitting
			$.post('http://x_banking/deposit', JSON.stringify({
				amount: $("#amount").val()
			}));
			$('#depositUI').hide();
			$('#general').show();
			$("#amount").val('');
		});
		$("#withdraw1").submit((e) => {
			e.preventDefault(); // Prevent form from submitting
			$.post('http://x_banking/withdrawl', JSON.stringify({
				amountw: $("#amountw").val()
			}));
			$('#withdrawUI').hide();
			$('#general').show();
			$("#amountw").val('');
		});
		$("#transfer1").submit((e) => {
			e.preventDefault(); // Prevent form from submitting
			$.post('http://x_banking/transfer1', JSON.stringify({
				amountw: $("#amountw2").val(),
				identidade: $("#identidade").val(),
			}));
			$('#transferUI').hide();
			$('#general').show();
			$("#amountw2").val('');
			$("#identidade").val('');
			$("#lastname").val('');
		});
		document.onkeyup = (data) => {
			if (data.which == 27) {
				$('#general,#withdrawUI, #depositUI').hide();
				$('body').removeClass("active");
				$.post('http://x_banking/NUIFocusOff', JSON.stringify({}));
			}
		}
	</script>
</body>

</html>